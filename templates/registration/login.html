{# templates/registration/login.html #}

{% extends 'base.html' %}

{% block title %}Login{% endblock %}

{% block content %}
  <h2>Login</h2>

  {# Display non-field errors (e.g., incorrect password) #}
  {% if form.non_field_errors %}
    <div class="alert alert-danger">
      {% for error in form.non_field_errors %}
        <p>{{ error }}</p>
      {% endfor %}
    </div>
  {% endif %}

  {# The form action posts to the current URL, which is handled by include('django.contrib.auth.urls') #}
  <form method="post">
    {% csrf_token %} {# Important security measure! Keep only one CSRF token #}

    {# ---- REMOVED Manual Field Rendering ---- #}
    {# Removed the div blocks for form.username and form.password #}

    {# ---- KEEP This Part ---- #}
    {# Renders username, password fields, and their labels automatically #}
    {{ form.as_p }}

    {# Submit Button #}
    <button type="submit" class="btn btn-primary">Login</button>

  </form> {# End of the form tag #}

  {# Link to password reset page #}
  <p class="mt-3"><a href="{% url 'password_reset' %}">Forgot password?</a></p>

{% endblock %}